require("dotenv").config();
const express = require("express");
const mongoose = require("mongoose");
const session = require("express-session");
const path = require("path");
const axios = require("axios");
const passport = require("passport");
const LocalStrategy = require("passport-local");
const User = require("./models/User");


const isLoggedIn = require("./middleware/isLoggedIn");
const Folder = require("./models/Folder");
const File = require("./models/File");

const app = express();
app.use(express.json()); // ensure this is enabled

require("./config/passport");



app.use(passport.initialize());
app.use(passport.session());

app.use((req, res, next) => {
  res.locals.currentUser = req.user;
  next();
});


